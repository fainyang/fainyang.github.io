---
title: NUS食堂排队指南
date: 2018-04-01
categories: 生活
tags: NUS
---
## 人生苦短，珍惜时间

这个其实是我读研在 NUS 跟着导师做的项目，自认为还是比较有趣的。在食堂吃饭，最怕长队漫漫，还有狗粮作伴。人生很多事情因为慢慢等待就错过了，本来打算去食堂吃某一样菜，却因为漫长的排队等待而望而却步。
所以嘛，年轻人要想少留遗憾，就要主动出击，爱要提前行动呀！
<!--more-->

![鸟](/img/canteen/bird.jpg)  
本文主要基于WiFi历史数据，分析NUS 工学院、文学院、YIH食堂的规律（本来最初还计划有computing食堂的，奈何系统上没有相关的信息记录）。  
用数据说话，分析每天食堂的拥挤时段给大家参考，以便大家减少排队时间，提高用餐体验。  

假设每个用户只有一个设备（在食堂用电脑的也比较少），并且在校园内大多数人都会打开WiFi。我们根据WiFi的连接情况，可以间接的判断人群密度，停留时间，流入流出速率。人群密度只需要统计每分钟连接WiFi的设备数即可。停留时间是由思科WiFi系统记录设备第一次连接WiFi的时间和当前时间作差得出，当设备离线超过15min系统会刷新first located time。流入流出速率则是比较前后两分钟mac address的不同来判断得出。

###  `首先举个例子好啦`

WiFi原始数据如下图所示： 可以在[NUS Data Commons](https://datacommons.nus.edu.sg/Default)用NUS ID登录后在Cisco MSE下载。  
![Table](/img/canteen/table.png)

经过分析处理，得到的结果图如下所示：  
![E1](/img/canteen/E1.png)  

* 蓝色线条 代表总人数
* `红色`线条 代表平均停留时间
* 绿色线条 代表流入率
* 黑色线条 代表流出率
  
上图是周一E1 6楼3月19号周一的情况。首先蓝色线条有5个峰值，而红色线条有5段逐渐增加的区间。两者结合，我们可知E1该天有5个上课时间段：9AM-11AM, 12PM-2PM, 2PM-4PM, 4PM-6PM, 6PM-9PM。  
因为在上课时间，总人数肯定比较多，随着课堂的进行，dwell time停留时间也在逐渐增加。在课堂的开始和下课阶段，流入和流出率较大。晚上的课大多数都是master课程，老师一般会在7:30左右课间休息，8:30左右下课。图中的结果和作者亲身经历也完全吻合，侧面说明我们处理分析数据的方法是正确的。
### 那如何分析食堂的数据呢？
大家肯定想知道，什么时间去吃饭，`不算太早但排队的人也不多呢？`  
本文分析了2018年春季第10周（3.19-3.23）的数据，采用的分析方法是:  

*  一般在总人数陡增前到达食堂是比较`稳`的，迟了队伍前面就是千军万马。  
![稳](/img/canteen/wen.png) 

*  平均停留时间开始急速下降的时候，因为如果没有顾客，食堂的device平均停留时间会由于食堂员工的存在随时间不断增加。当有大量学生来时，平均停留时间会因为基数的增大而开始下降。
*  流入流出率这里不采用，是因为根据作者的亲身经历来看，每分钟的流入流出率因为不可能那么大。误差估计是WiFi系统对于每分钟probing（探测）设备的统计误差，时有时无造成的。

## 工学院食堂

Engineer师生常去的食堂，价格也超级便宜。队伍比较长的一般是西餐，日本料理等。感觉这学期在E1的课比较少，每周只有周一晚上才去吃饭。下图是周一工学院食堂的情况，时间为10AM--7:30PM  
![E](/img/canteen/E-319.png)  

从图中我们可以看出，在`11:31`时，蓝色线条总人数开始迅速增加，红色线条平均停留时间也开始下降，这不正是暴风雨前的预兆吗？说明这个时间是用餐高峰期的开始。同样的，晚餐的用餐高峰期是从`5:20`开始的。

## 文学院食堂

文学院食堂作者最爱的是海南鸡饭，三楼凉拌功夫的麻辣香锅也很不错。作者曾经有一次亲身经历，11:40到文学院食堂，人多到我想放弃。。。下图是周一文学院食堂的情况，时间为10AM--7:30PM  
![F](/img/canteen/F-319.png)  

文学院食堂从`11:20`，平均停留时间就开始下滑，`11:30`后总人数也是急剧攀升。说明这个11:20-11:30时间是用餐高峰期的开始。 晚餐虽然呈现出变化趋势，但真的一点都不拥挤。。。  

## YIH食堂

YIH的mixed food每次人都超级多，排队时还经常可以吃狗粮，美滋滋。但YIH相比于前面两个食堂，人数明显是少很多，因为食堂本来就不是很大。下图是周一YIH食堂的情况，时间为10AM--7:30PM  
![Y](/img/canteen/Y-319.png) 
 
从上图可以看出，午餐高峰时间从`11:20`开始，总人数开始增加，平均停留时间迅速减小，这不正是千军万马来临前的预兆吗？ 同样的，晚餐高峰是从`5:29`开始的。

## 表格总结 `划重点`
每个食堂都分析了一周5天的数据，结果汇总在下表：  
![B](/img/canteen/B.png)   

`敲黑板:`一般来说中午下课时间大概是在`11:30`，所以赶在这之前去食堂，人都会比较少。晚上除了YIH，其余两个食堂也不怎么拥挤。
### 剩下的图：周二到周五
![E2](/img/canteen/E-320.png)  
![E3](/img/canteen/E-321.png)   
![E4](/img/canteen/E-322.png)   
![E5](/img/canteen/E-323.png) 

![F2](/img/canteen/F-320.png)  
![F3](/img/canteen/F-321.png)    
![F4](/img/canteen/F-322.png)  
![F5](/img/canteen/F-323.png)   

![Y2](/img/canteen/Y-320.png)  
![Y3](/img/canteen/Y-321.png)  
![Y4](/img/canteen/Y-322.png)  
![Y5](/img/canteen/Y-323.png)  

## 最后的吐槽
最后的一个月，马上就要毕业了，最近忙的没有时间写博客。课程，项目，论文，期末考试，找工作都是一座座艰难的大山。狗住Uo･ｪ･oU加油٩(●˙▿˙●)۶…⋆ฺ  

PS: 如果对这个分析有更好的建议，或者发现了错误之处。欢迎交流，联系方式:
+ QQ: 601300870
+ Email: fainyang@foxmail.com